import { PolygonUtil } from "./polygon.util";
var PolygonInfo = /** @class */ (function () {
    function PolygonInfo(polygon) {
        var _this = this;
        this.polygon = [];
        this.trashcanPoint = [];
        this.sqmArea = [];
        this.perimeter = [];
        console.log("PolygonInfo: ", polygon);
        polygon.forEach(function (polygons, i) {
            _this.trashcanPoint[i] = _this.getTrashcanPoint(polygons[0]);
            _this.sqmArea[i] = _this.calculatePolygonArea(polygons[0]);
            _this.perimeter[i] = _this.calculatePolygonPerimeter(polygons[0]);
            console.log(polygons[0]);
            _this.polygon[i] = polygons;
        });
    }
    PolygonInfo.prototype.setSqmArea = function (area) {
        this.sqmArea[0] = area;
    };
    PolygonInfo.prototype.getTrashcanPoint = function (polygon) {
        var res = Math.max.apply(Math, polygon.map(function (o) { return o.lat; }));
        var idx = polygon.findIndex(function (o) { return o.lat === res; });
        var previousPoint;
        var nextPoint;
        if (idx > 0) {
            previousPoint = polygon[idx - 1];
            if (idx < polygon.length - 1) {
                nextPoint = polygon[idx + 1];
            }
            else {
                nextPoint = polygon[0];
            }
        }
        else {
            previousPoint = polygon[polygon.length - 1];
            nextPoint = polygon[idx + 1];
        }
        var secondPoint = (previousPoint.lng < nextPoint.lng) ? previousPoint : nextPoint;
        var midpoint = PolygonUtil.getMidPoint(polygon[idx], secondPoint);
        return midpoint;
    };
    PolygonInfo.prototype.calculatePolygonArea = function (polygon) {
        var area = PolygonUtil.getSqmArea((polygon));
        return area;
    };
    PolygonInfo.prototype.calculatePolygonPerimeter = function (polygon) {
        var perimeter = PolygonUtil.getPerimeter((polygon));
        return perimeter;
    };
    return PolygonInfo;
}());
export { PolygonInfo };
var PolygonDrawStates = /** @class */ (function () {
    function PolygonDrawStates() {
        this.canUsePolyDraw = false;
        this.reset();
    }
    PolygonDrawStates.prototype.activate = function () {
        this.reset();
        this.isActivated = true;
    };
    PolygonDrawStates.prototype.reset = function () {
        this.isActivated = false;
        this.hasPolygons = false;
        this.canRevert = false;
        this.isAuto = false;
        this.resetDrawModes();
    };
    PolygonDrawStates.prototype.resetDrawModes = function () {
        this.isFreeDrawMode = false;
        this.isMoveMode = false;
    };
    PolygonDrawStates.prototype.setFreeDrawMode = function (isAuto) {
        if (isAuto === void 0) { isAuto = false; }
        if (isAuto) {
            this.isActivated = true;
        }
        if (this.isActivated) {
            this.resetDrawModes();
            this.isFreeDrawMode = true;
            if (isAuto) {
                this.isAuto = true;
            }
        }
    };
    PolygonDrawStates.prototype.setMoveMode = function () {
        if (this.isActivated) {
            this.resetDrawModes();
            this.isMoveMode = true;
        }
    };
    PolygonDrawStates.prototype.forceCanUseFreeDraw = function () {
        this.canUsePolyDraw = true;
    };
    return PolygonDrawStates;
}());
export { PolygonDrawStates };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9seWdvbi1oZWxwZXJzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbXktbGliLyIsInNvdXJjZXMiOlsibGliL3BvbHlnb24taGVscGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFN0M7SUFLSSxxQkFBWSxPQUFPO1FBQW5CLGlCQVNDO1FBYkQsWUFBTyxHQUFrQixFQUFFLENBQUM7UUFDNUIsa0JBQWEsR0FBYyxFQUFFLENBQUM7UUFDOUIsWUFBTyxHQUFhLEVBQUUsQ0FBQztRQUN2QixjQUFTLEdBQWEsRUFBRSxDQUFDO1FBRXJCLE9BQU8sQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3RDLE9BQU8sQ0FBQyxPQUFPLENBQUMsVUFBQyxRQUFRLEVBQUUsQ0FBQztZQUFPLEtBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzFGLEtBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSSxDQUFDLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3pELEtBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSSxDQUFDLHlCQUF5QixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2hFLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDekIsS0FBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUE7UUFDOUIsQ0FBQyxDQUFDLENBQUE7SUFFTixDQUFDO0lBQ0QsZ0NBQVUsR0FBVixVQUFXLElBQVk7UUFDbkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7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U0FDM0I7UUFDRCxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDbEIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ3RCLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO1lBQzNCLElBQUksTUFBTSxFQUFFO2dCQUNSLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO2FBQ3RCO1NBQ0o7SUFDTCxDQUFDO0lBRUQsdUNBQVcsR0FBWDtRQUNJLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNsQixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7WUFDdEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7U0FDMUI7SUFDTCxDQUFDO0lBRUQsK0NBQW1CLEdBQW5CO1FBQ0ksSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7SUFDL0IsQ0FBQztJQUNMLHdCQUFDO0FBQUQsQ0FBQyxBQXpERCxJQXlEQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBvbHlnb25VdGlsIH0gZnJvbSBcIi4vcG9seWdvbi51dGlsXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9seWdvbkluZm8ge1xyXG4gICAgcG9seWdvbjogSUxhdExuZ1tdW11bXSA9IFtdO1xyXG4gICAgdHJhc2hjYW5Qb2ludDogSUxhdExuZ1tdID0gW107XHJcbiAgICBzcW1BcmVhOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgcGVyaW1ldGVyOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgY29uc3RydWN0b3IocG9seWdvbikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUG9seWdvbkluZm86IFwiLCBwb2x5Z29uKTtcclxuICAgICAgICBwb2x5Z29uLmZvckVhY2goKHBvbHlnb25zLCBpKSA9PiB7IHRoaXMudHJhc2hjYW5Qb2ludFtpXSA9IHRoaXMuZ2V0VHJhc2hjYW5Qb2ludChwb2x5Z29uc1swXSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3FtQXJlYVtpXSA9IHRoaXMuY2FsY3VsYXRlUG9seWdvbkFyZWEocG9seWdvbnNbMF0pO1xyXG4gICAgICAgICAgICB0aGlzLnBlcmltZXRlcltpXSA9IHRoaXMuY2FsY3VsYXRlUG9seWdvblBlcmltZXRlcihwb2x5Z29uc1swXSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBvbHlnb25zWzBdKTtcclxuICAgICAgICAgICAgdGhpcy5wb2x5Z29uW2ldID0gcG9seWdvbnNcclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG4gICAgc2V0U3FtQXJlYShhcmVhOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNxbUFyZWFbMF0gPSBhcmVhO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRUcmFzaGNhblBvaW50KHBvbHlnb246IElMYXRMbmdbXSk6IElMYXRMbmcge1xyXG5cclxuICAgICAgICBjb25zdCByZXMgPSBNYXRoLm1heC5hcHBseShNYXRoLCBwb2x5Z29uLm1hcChvID0+IG8ubGF0KSk7XHJcbiAgICAgICAgY29uc3QgaWR4ID0gcG9seWdvbi5maW5kSW5kZXgobyA9PiBvLmxhdCA9PT0gcmVzKTtcclxuXHJcbiAgICAgICAgbGV0IHByZXZpb3VzUG9pbnQ6IElMYXRMbmc7XHJcbiAgICAgICAgbGV0IG5leHRQb2ludDogSUxhdExuZztcclxuXHJcbiAgICAgICAgaWYgKGlkeCA+IDApIHtcclxuICAgICAgICAgICAgcHJldmlvdXNQb2ludCA9IHBvbHlnb25baWR4IC0gMV07XHJcbiAgICAgICAgICAgIGlmIChpZHggPCBwb2x5Z29uLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIG5leHRQb2ludCA9IHBvbHlnb25baWR4ICsgMV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0UG9pbnQgPSBwb2x5Z29uWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcHJldmlvdXNQb2ludCA9IHBvbHlnb25bcG9seWdvbi5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgbmV4dFBvaW50ID0gcG9seWdvbltpZHggKyAxXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNlY29uZFBvaW50ID0gKHByZXZpb3VzUG9pbnQubG5nIDwgbmV4dFBvaW50LmxuZykgPyBwcmV2aW91c1BvaW50IDogbmV4dFBvaW50O1xyXG5cclxuICAgICAgICBjb25zdCBtaWRwb2ludCA9IFBvbHlnb25VdGlsLmdldE1pZFBvaW50KHBvbHlnb25baWR4XSwgc2Vjb25kUG9pbnQpO1xyXG5cclxuICAgICAgICByZXR1cm4gbWlkcG9pbnQ7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNhbGN1bGF0ZVBvbHlnb25BcmVhKHBvbHlnb246IElMYXRMbmdbXSk6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgYXJlYSA9IFBvbHlnb25VdGlsLmdldFNxbUFyZWEoKHBvbHlnb24pIGFzIGFueSk7XHJcbiAgICAgICAgcmV0dXJuIGFyZWE7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNhbGN1bGF0ZVBvbHlnb25QZXJpbWV0ZXIocG9seWdvbjogSUxhdExuZ1tdKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCBwZXJpbWV0ZXIgPSBQb2x5Z29uVXRpbC5nZXRQZXJpbWV0ZXIoKHBvbHlnb24pIGFzIGFueSk7XHJcbiAgICAgICAgcmV0dXJuIHBlcmltZXRlcjtcclxuICAgIH1cclxuICAgIFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUG9seWdvbkRyYXdTdGF0ZXMge1xyXG4gICAgaXNBY3RpdmF0ZWQ6IGJvb2xlYW47XHJcbiAgICBpc0ZyZWVEcmF3TW9kZTogYm9vbGVhbjtcclxuICAgIGlzTW92ZU1vZGU6IGJvb2xlYW47XHJcbiAgICBjYW5SZXZlcnQ6IGJvb2xlYW47XHJcbiAgICBpc0F1dG86IGJvb2xlYW47XHJcbiAgICBoYXNQb2x5Z29uczogYm9vbGVhbjtcclxuICAgIGNhblVzZVBvbHlEcmF3OiBib29sZWFuO1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmNhblVzZVBvbHlEcmF3ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFjdGl2YXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICB0aGlzLmlzQWN0aXZhdGVkID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmlzQWN0aXZhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5oYXNQb2x5Z29ucyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY2FuUmV2ZXJ0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc0F1dG8gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXNldERyYXdNb2RlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0RHJhd01vZGVzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaXNGcmVlRHJhd01vZGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzTW92ZU1vZGUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRGcmVlRHJhd01vZGUoaXNBdXRvOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcclxuICAgICAgICBpZiAoaXNBdXRvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNBY3RpdmF0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pc0FjdGl2YXRlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0RHJhd01vZGVzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXNGcmVlRHJhd01vZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoaXNBdXRvKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzQXV0byA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TW92ZU1vZGUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmF0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNldERyYXdNb2RlcygpO1xyXG4gICAgICAgICAgICB0aGlzLmlzTW92ZU1vZGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmb3JjZUNhblVzZUZyZWVEcmF3KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FuVXNlUG9seURyYXcgPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElMYXRMbmcge1xyXG4gICAgbGF0OiBudW1iZXIsIFxyXG4gICAgbG5nOiBudW1iZXI7XHJcbn0iXX0=