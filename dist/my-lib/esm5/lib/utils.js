import * as L from "leaflet";
import { MarkerPosition } from "./enums";
var PolyDrawUtil = /** @class */ (function () {
    function PolyDrawUtil() {
    }
    PolyDrawUtil.getBounds = function (polygon, padding) {
        if (padding === void 0) { padding = 0; }
        var tmpLatLng = [];
        polygon.forEach(function (ll) {
            if (isNaN(ll.lat) || isNaN(ll.lng)) {
            }
            tmpLatLng.push(ll);
        });
        var polyLine = new L.Polyline(tmpLatLng);
        var bounds = polyLine.getBounds();
        if (padding !== 0) {
            return bounds.pad(padding);
        }
        return bounds;
    };
    return PolyDrawUtil;
}());
export { PolyDrawUtil };
//TODO make compass ILatLng
var Compass = /** @class */ (function () {
    function Compass(minLat, minLng, maxLat, maxLng) {
        if (minLat === void 0) { minLat = 0; }
        if (minLng === void 0) { minLng = 0; }
        if (maxLat === void 0) { maxLat = 0; }
        if (maxLng === void 0) { maxLng = 0; }
        this.direction = {
            // BoundingBoxCenter: { lat: 0, lng: 0 },
            // CenterOfMass: { lat: 0, lng: 0 },
            East: { lat: 0, lng: 0 },
            North: { lat: 0, lng: 0 },
            NorthEast: { lat: 0, lng: 0 },
            NorthWest: { lat: 0, lng: 0 },
            South: { lat: 0, lng: 0 },
            SouthEast: { lat: 0, lng: 0 },
            SouthWest: { lat: 0, lng: 0 },
            West: { lat: 0, lng: 0 }
        };
        this.direction.North = { lat: maxLat, lng: (minLng + maxLng) / 2 };
        this.direction.NorthEast = { lat: maxLat, lng: maxLng };
        this.direction.East = { lat: (minLat + maxLat) / 2, lng: maxLng };
        this.direction.SouthEast = { lat: minLat, lng: maxLng };
        this.direction.South = { lat: minLat, lng: (minLng + maxLng) / 2 };
        this.direction.SouthWest = { lat: minLat, lng: minLng };
        this.direction.West = { lat: (minLat + maxLat) / 2, lng: minLng };
        this.direction.NorthWest = { lat: maxLat, lng: minLng };
        // this.direction.CenterOfMass = { lat: 0, lng: 0 };
        // this.direction.BoundingBoxCenter = {lat: (minLat + maxLat) / 2, lng: (minLng + maxLng) / 2};
    }
    //TODO default return.
    Compass.prototype.getDirection = function (direction) {
        switch (direction) {
            // case MarkerPosition.CenterOfMass:
            //     return this.direction.CenterOfMass;
            case MarkerPosition.North:
                return this.direction.North;
            case MarkerPosition.NorthEast:
                return this.direction.NorthEast;
            case MarkerPosition.East:
                return this.direction.East;
            case MarkerPosition.SouthEast:
                return this.direction.SouthEast;
            case MarkerPosition.South:
                return this.direction.South;
            case MarkerPosition.SouthWest:
                return this.direction.SouthWest;
            case MarkerPosition.West:
                return this.direction.West;
            case MarkerPosition.NorthWest:
                return this.direction.NorthWest;
            // case MarkerPosition.BoundingBoxCenter:
            //     return this.direction.BoundingBoxCenter;
            default:
                return this.direction.North;
        }
    };
    //TODO startNode, go clockwise or not
    Compass.prototype.getPositions = function (startNode, clockwise, addClosingNode) {
        if (startNode === void 0) { startNode = MarkerPosition.SouthWest; }
        if (clockwise === void 0) { clockwise = false; }
        if (addClosingNode === void 0) { addClosingNode = true; }
        var positions = [];
        positions.push([this.direction.SouthWest.lng, this.direction.SouthWest.lat]);
        positions.push([this.direction.SouthWest.lng, this.direction.SouthWest.lat]);
        positions.push([this.direction.South.lng, this.direction.South.lat]);
        positions.push([this.direction.SouthEast.lng, this.direction.SouthEast.lat]);
        positions.push([this.direction.East.lng, this.direction.East.lat]);
        positions.push([this.direction.NorthEast.lng, this.direction.NorthEast.lat]);
        positions.push([this.direction.North.lng, this.direction.North.lat]);
        positions.push([this.direction.NorthWest.lng, this.direction.NorthWest.lat]);
        positions.push([this.direction.West.lng, this.direction.West.lat]);
        if (addClosingNode) {
            positions.push([this.direction.SouthWest.lng, this.direction.SouthWest.lat]);
        }
        return positions;
    };
    return Compass;
}());
export { Compass };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9teS1saWIvIiwic291cmNlcyI6WyJsaWIvdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxLQUFLLENBQUMsTUFBTSxTQUFTLENBQUM7QUFFN0IsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUV6QztJQUFBO0lBZUEsQ0FBQztJQWRVLHNCQUFTLEdBQWhCLFVBQWlCLE9BQWtCLEVBQUUsT0FBbUI7UUFBbkIsd0JBQUEsRUFBQSxXQUFtQjtRQUNwRCxJQUFNLFNBQVMsR0FBZSxFQUFFLENBQUM7UUFDakMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxVQUFBLEVBQUU7WUFDZCxJQUFJLEtBQUssQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRTthQUNuQztZQUNELFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBYyxDQUFDLENBQUM7UUFDbkMsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFNLFFBQVEsR0FBZSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDdkQsSUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ3BDLElBQUksT0FBTyxLQUFLLENBQUMsRUFBRTtZQUNmLE9BQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUM5QjtRQUNELE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7SUFDTCxtQkFBQztBQUFELENBQUMsQUFmRCxJQWVDOztBQUNELDJCQUEyQjtBQUMzQjtJQWVJLGlCQUFZLE1BQWtCLEVBQUUsTUFBa0IsRUFBRSxNQUFrQixFQUFFLE1BQWtCO1FBQTlFLHVCQUFBLEVBQUEsVUFBa0I7UUFBRSx1QkFBQSxFQUFBLFVBQWtCO1FBQUUsdUJBQUEsRUFBQSxVQUFrQjtRQUFFLHVCQUFBLEVBQUEsVUFBa0I7UUFibkYsY0FB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IElDb21wYXNzIH0gZnJvbSBcIi4vaW50ZXJmYWNlXCI7XG5pbXBvcnQgKiBhcyBMIGZyb20gXCJsZWFmbGV0XCI7XG5pbXBvcnQgeyBJTGF0TG5nIH0gZnJvbSBcIi4vcG9seWdvbi1oZWxwZXJzXCI7XG5pbXBvcnQgeyBNYXJrZXJQb3NpdGlvbiB9IGZyb20gXCIuL2VudW1zXCI7XG5cbmV4cG9ydCBjbGFzcyBQb2x5RHJhd1V0aWwge1xuICAgIHN0YXRpYyBnZXRCb3VuZHMocG9seWdvbjogSUxhdExuZ1tdLCBwYWRkaW5nOiBudW1iZXIgPSAwKTogTC5MYXRMbmdCb3VuZHMge1xuICAgICAgICBjb25zdCB0bXBMYXRMbmc6IEwuTGF0TG5nW10gPSBbXTtcbiAgICAgICAgcG9seWdvbi5mb3JFYWNoKGxsID0+IHtcbiAgICAgICAgICAgIGlmIChpc05hTihsbC5sYXQpIHx8IGlzTmFOKGxsLmxuZykpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRtcExhdExuZy5wdXNoKGxsIGFzIEwuTGF0TG5nKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHBvbHlMaW5lOiBMLlBvbHlsaW5lID0gbmV3IEwuUG9seWxpbmUodG1wTGF0TG5nKTtcbiAgICAgICAgY29uc3QgYm91bmRzID0gcG9seUxpbmUuZ2V0Qm91bmRzKCk7XG4gICAgICAgIGlmIChwYWRkaW5nICE9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYm91bmRzLnBhZChwYWRkaW5nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYm91bmRzO1xuICAgIH1cbn1cbi8vVE9ETyBtYWtlIGNvbXBhc3MgSUxhdExuZ1xuZXhwb3J0IGNsYXNzIENvbXBhc3Mge1xuXG4gICAgcHVibGljIGRpcmVjdGlvbjogSUNvbXBhc3MgPSB7XG4gICAgICAgIC8vIEJvdW5kaW5nQm94Q2VudGVyOiB7IGxhdDogMCwgbG5nOiAwIH0sXG4gICAgICAgIC8vIENlbnRlck9mTWFzczogeyBsYXQ6IDAsIGxuZzogMCB9LFxuICAgICAgICBFYXN0OiB7IGxhdDogMCwgbG5nOiAwIH0sXG4gICAgICAgIE5vcnRoOiB7IGxhdDogMCwgbG5nOiAwIH0sXG4gICAgICAgIE5vcnRoRWFzdDogeyBsYXQ6IDAsIGxuZzogMCB9LFxuICAgICAgICBOb3J0aFdlc3Q6IHsgbGF0OiAwLCBsbmc6IDAgfSxcbiAgICAgICAgU291dGg6IHsgbGF0OiAwLCBsbmc6IDAgfSxcbiAgICAgICAgU291dGhFYXN0OiB7IGxhdDogMCwgbG5nOiAwIH0sXG4gICAgICAgIFNvdXRoV2VzdDogeyBsYXQ6IDAsIGxuZzogMCB9LFxuICAgICAgICBXZXN0OiB7IGxhdDogMCwgbG5nOiAwIH1cbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IobWluTGF0OiBudW1iZXIgPSAwLCBtaW5Mbmc6IG51bWJlciA9IDAsIG1heExhdDogbnVtYmVyID0gMCwgbWF4TG5nOiBudW1iZXIgPSAwKSB7XG5cbiAgICAgICAgdGhpcy5kaXJlY3Rpb24uTm9ydGggPSB7IGxhdDogbWF4TGF0LCBsbmc6IChtaW5MbmcgKyBtYXhMbmcpIC8gMiB9O1xuICAgICAgICB0aGlzLmRpcmVjdGlvbi5Ob3J0aEVhc3QgPSB7IGxhdDogbWF4TGF0LCBsbmc6IG1heExuZyB9O1xuICAgICAgICB0aGlzLmRpcmVjdGlvbi5FYXN0ID0geyBsYXQ6IChtaW5MYXQgKyBtYXhMYXQpIC8gMiwgbG5nOiBtYXhMbmcgfTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24uU291dGhFYXN0ID0geyBsYXQ6IG1pbkxhdCwgbG5nOiBtYXhMbmcgfTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24uU291dGggPSB7IGxhdDogbWluTGF0LCBsbmc6IChtaW5MbmcgKyBtYXhMbmcpIC8gMiB9O1xuICAgICAgICB0aGlzLmRpcmVjdGlvbi5Tb3V0aFdlc3QgPSB7IGxhdDogbWluTGF0LCBsbmc6IG1pbkxuZyB9O1xuICAgICAgICB0aGlzLmRpcmVjdGlvbi5XZXN0ID0geyBsYXQ6IChtaW5MYXQgKyBtYXhMYXQpIC8gMiwgbG5nOiBtaW5MbmcgfTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24uTm9ydGhXZXN0ID0geyBsYXQ6IG1heExhdCwgbG5nOiBtaW5MbmcgfTtcbiAgICAgICAgLy8gdGhpcy5kaXJlY3Rpb24uQ2VudGVyT2ZNYXNzID0geyBsYXQ6IDAsIGxuZzogMCB9O1xuICAgICAgICAvLyB0aGlzLmRpcmVjdGlvbi5Cb3VuZGluZ0JveENlbnRlciA9IHtsYXQ6IChtaW5MYXQgKyBtYXhMYXQpIC8gMiwgbG5nOiAobWluTG5nICsgbWF4TG5nKSAvIDJ9O1xuICAgIH1cbiAgICAvL1RPRE8gZGVmYXVsdCByZXR1cm4uXG4gICAgZ2V0RGlyZWN0aW9uKGRpcmVjdGlvbjogTWFya2VyUG9zaXRpb24pIHtcbiAgICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIGNhc2UgTWFya2VyUG9zaXRpb24uQ2VudGVyT2ZNYXNzOlxuICAgICAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbi5DZW50ZXJPZk1hc3M7XG4gICAgICAgICAgICBjYXNlIE1hcmtlclBvc2l0aW9uLk5vcnRoOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbi5Ob3J0aDtcbiAgICAgICAgICAgIGNhc2UgTWFya2VyUG9zaXRpb24uTm9ydGhFYXN0OlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbi5Ob3J0aEVhc3Q7XG4gICAgICAgICAgICBjYXNlIE1hcmtlclBvc2l0aW9uLkVhc3Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uLkVhc3Q7XG4gICAgICAgICAgICBjYXNlIE1hcmtlclBvc2l0aW9uLlNvdXRoRWFzdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb24uU291dGhFYXN0O1xuICAgICAgICAgICAgY2FzZSBNYXJrZXJQb3NpdGlvbi5Tb3V0aDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb24uU291dGg7XG4gICAgICAgICAgICBjYXNlIE1hcmtlclBvc2l0aW9uLlNvdXRoV2VzdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb24uU291dGhXZXN0O1xuICAgICAgICAgICAgY2FzZSBNYXJrZXJQb3NpdGlvbi5XZXN0OlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbi5XZXN0O1xuICAgICAgICAgICAgY2FzZSBNYXJrZXJQb3NpdGlvbi5Ob3J0aFdlc3Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uLk5vcnRoV2VzdDtcbiAgICAgICAgICAgIC8vIGNhc2UgTWFya2VyUG9zaXRpb24uQm91bmRpbmdCb3hDZW50ZXI6XG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uLkJvdW5kaW5nQm94Q2VudGVyO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb24uTm9ydGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy9UT0RPIHN0YXJ0Tm9kZSwgZ28gY2xvY2t3aXNlIG9yIG5vdFxuICAgIGdldFBvc2l0aW9ucyhzdGFydE5vZGU6IE1hcmtlclBvc2l0aW9uID0gTWFya2VyUG9zaXRpb24uU291dGhXZXN0LCBjbG9ja3dpc2U6IGJvb2xlYW4gPSBmYWxzZSwgYWRkQ2xvc2luZ05vZGU6IGJvb2xlYW4gPSB0cnVlKTogbnVtYmVyW11bXSB7XG5cbiAgICAgICAgbGV0IHBvc2l0aW9uczogbnVtYmVyW11bXSA9IFtdO1xuXG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKFt0aGlzLmRpcmVjdGlvbi5Tb3V0aFdlc3QubG5nLCB0aGlzLmRpcmVjdGlvbi5Tb3V0aFdlc3QubGF0XSk7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKFt0aGlzLmRpcmVjdGlvbi5Tb3V0aFdlc3QubG5nLCB0aGlzLmRpcmVjdGlvbi5Tb3V0aFdlc3QubGF0XSk7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKFt0aGlzLmRpcmVjdGlvbi5Tb3V0aC5sbmcsIHRoaXMuZGlyZWN0aW9uLlNvdXRoLmxhdF0pO1xuICAgICAgICBwb3NpdGlvbnMucHVzaChbdGhpcy5kaXJlY3Rpb24uU291dGhFYXN0LmxuZywgdGhpcy5kaXJlY3Rpb24uU291dGhFYXN0LmxhdF0pO1xuICAgICAgICBwb3NpdGlvbnMucHVzaChbdGhpcy5kaXJlY3Rpb24uRWFzdC5sbmcsIHRoaXMuZGlyZWN0aW9uLkVhc3QubGF0XSk7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKFt0aGlzLmRpcmVjdGlvbi5Ob3J0aEVhc3QubG5nLCB0aGlzLmRpcmVjdGlvbi5Ob3J0aEVhc3QubGF0XSk7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKFt0aGlzLmRpcmVjdGlvbi5Ob3J0aC5sbmcsIHRoaXMuZGlyZWN0aW9uLk5vcnRoLmxhdF0pO1xuICAgICAgICBwb3NpdGlvbnMucHVzaChbdGhpcy5kaXJlY3Rpb24uTm9ydGhXZXN0LmxuZywgdGhpcy5kaXJlY3Rpb24uTm9ydGhXZXN0LmxhdF0pO1xuICAgICAgICBwb3NpdGlvbnMucHVzaChbdGhpcy5kaXJlY3Rpb24uV2VzdC5sbmcsIHRoaXMuZGlyZWN0aW9uLldlc3QubGF0XSk7XG4gICAgICAgIGlmIChhZGRDbG9zaW5nTm9kZSkge1xuICAgICAgICAgICAgcG9zaXRpb25zLnB1c2goW3RoaXMuZGlyZWN0aW9uLlNvdXRoV2VzdC5sbmcsIHRoaXMuZGlyZWN0aW9uLlNvdXRoV2VzdC5sYXRdKTtcbiAgICAgICAgfVxuXG5cblxuICAgICAgICByZXR1cm4gcG9zaXRpb25zO1xuICAgIH1cbn0iXX0=