import * as L from "leaflet";
import { MarkerPosition } from "./enums";
export class PolyDrawUtil {
    static getBounds(polygon, padding = 0) {
        const tmpLatLng = [];
        polygon.forEach(ll => {
            if (isNaN(ll.lat) || isNaN(ll.lng)) {
            }
            tmpLatLng.push(ll);
        });
        const polyLine = new L.Polyline(tmpLatLng);
        const bounds = polyLine.getBounds();
        if (padding !== 0) {
            return bounds.pad(padding);
        }
        return bounds;
    }
}
//TODO make compass ILatLng
export class Compass {
    constructor(minLat = 0, minLng = 0, maxLat = 0, maxLng = 0) {
        this.direction = {
            // BoundingBoxCenter: { lat: 0, lng: 0 },
            // CenterOfMass: { lat: 0, lng: 0 },
            East: { lat: 0, lng: 0 },
            North: { lat: 0, lng: 0 },
            NorthEast: { lat: 0, lng: 0 },
            NorthWest: { lat: 0, lng: 0 },
            South: { lat: 0, lng: 0 },
            SouthEast: { lat: 0, lng: 0 },
            SouthWest: { lat: 0, lng: 0 },
            West: { lat: 0, lng: 0 }
        };
        this.direction.North = { lat: maxLat, lng: (minLng + maxLng) / 2 };
        this.direction.NorthEast = { lat: maxLat, lng: maxLng };
        this.direction.East = { lat: (minLat + maxLat) / 2, lng: maxLng };
        this.direction.SouthEast = { lat: minLat, lng: maxLng };
        this.direction.South = { lat: minLat, lng: (minLng + maxLng) / 2 };
        this.direction.SouthWest = { lat: minLat, lng: minLng };
        this.direction.West = { lat: (minLat + maxLat) / 2, lng: minLng };
        this.direction.NorthWest = { lat: maxLat, lng: minLng };
        // this.direction.CenterOfMass = { lat: 0, lng: 0 };
        // this.direction.BoundingBoxCenter = {lat: (minLat + maxLat) / 2, lng: (minLng + maxLng) / 2};
    }
    //TODO default return.
    getDirection(direction) {
        switch (direction) {
            // case MarkerPosition.CenterOfMass:
            //     return this.direction.CenterOfMass;
            case MarkerPosition.North:
                return this.direction.North;
            case MarkerPosition.NorthEast:
                return this.direction.NorthEast;
            case MarkerPosition.East:
                return this.direction.East;
            case MarkerPosition.SouthEast:
                return this.direction.SouthEast;
            case MarkerPosition.South:
                return this.direction.South;
            case MarkerPosition.SouthWest:
                return this.direction.SouthWest;
            case MarkerPosition.West:
                return this.direction.West;
            case MarkerPosition.NorthWest:
                return this.direction.NorthWest;
            // case MarkerPosition.BoundingBoxCenter:
            //     return this.direction.BoundingBoxCenter;
            default:
                return this.direction.North;
        }
    }
    //TODO startNode, go clockwise or not
    getPositions(startNode = MarkerPosition.SouthWest, clockwise = false, addClosingNode = true) {
        let positions = [];
        positions.push([this.direction.SouthWest.lng, this.direction.SouthWest.lat]);
        positions.push([this.direction.SouthWest.lng, this.direction.SouthWest.lat]);
        positions.push([this.direction.South.lng, this.direction.South.lat]);
        positions.push([this.direction.SouthEast.lng, this.direction.SouthEast.lat]);
        positions.push([this.direction.East.lng, this.direction.East.lat]);
        positions.push([this.direction.NorthEast.lng, this.direction.NorthEast.lat]);
        positions.push([this.direction.North.lng, this.direction.North.lat]);
        positions.push([this.direction.NorthWest.lng, this.direction.NorthWest.lat]);
        positions.push([this.direction.West.lng, this.direction.West.lat]);
        if (addClosingNode) {
            positions.push([this.direction.SouthWest.lng, this.direction.SouthWest.lat]);
        }
        return positions;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9teS1saWIvc3JjL2xpYi91dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEtBQUssQ0FBQyxNQUFNLFNBQVMsQ0FBQztBQUU3QixPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sU0FBUyxDQUFDO0FBRXpDLE1BQU0sT0FBTyxZQUFZO0lBQ3JCLE1BQU0sQ0FBQyxTQUFTLENBQUMsT0FBa0IsRUFBRSxVQUFrQixDQUFDO1FBQ3BELE1BQU0sU0FBUyxHQUFlLEVBQUUsQ0FBQztRQUNqQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFO1lBQ2pCLElBQUksS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFO2FBQ25DO1lBQ0QsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFjLENBQUMsQ0FBQztRQUNuQyxDQUFDLENBQUMsQ0FBQztRQUNILE1BQU0sUUFBUSxHQUFlLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN2RCxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDcEMsSUFBSSxPQUFPLEtBQUssQ0FBQyxFQUFFO1lBQ2YsT0FBTyxNQUFNLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQzlCO1FBQ0QsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQztDQUNKO0FBQ0QsMkJBQTJCO0FBQzNCLE1BQU0sT0FBTyxPQUFPO0lBZWhCLFlBQVksU0FBaUIsQ0FBQyxFQUFFLFNBQWlCLENBQUMsRUFBRSxTQUFpQixDQUFDLEVBQUUsU0FBaUIsQ0FBQztRQWJuRixjQUFTLEdBQWE7WUFDekIseUNBQXlDO1lBQ3pDLG9DQUFvQztZQUNwQyxJQUFJLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUU7WUFDeEIsS0FBSyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFO1lBQ3pCLFNBQVMsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRTtZQUM3QixTQUFTLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUU7WUFDN0IsS0FBSyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFO1lBQ3pCLFNBQVMsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRTtZQUM3QixTQUFTLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUU7WUFDN0IsSUFBSSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFO1NBQzNCLENBQUM7UUFJRSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO1FBQ25FLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLENBQUM7UUFDeEQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsQ0FBQztRQUNsRSxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsR0FBRyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxDQUFDO1FBQ3hELElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFH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UyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ25FLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM3RSxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckUsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzdFLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNuRSxJQUFJLGNBQWMsRUFBRTtZQUNoQixTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7U0FDaEY7UUFJRCxPQUFPLFNBQVMsQ0FBQztJQUNyQixDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJQ29tcGFzcyB9IGZyb20gXCIuL2ludGVyZmFjZVwiO1xyXG5pbXBvcnQgKiBhcyBMIGZyb20gXCJsZWFmbGV0XCI7XHJcbmltcG9ydCB7IElMYXRMbmcgfSBmcm9tIFwiLi9wb2x5Z29uLWhlbHBlcnNcIjtcclxuaW1wb3J0IHsgTWFya2VyUG9zaXRpb24gfSBmcm9tIFwiLi9lbnVtc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvbHlEcmF3VXRpbCB7XHJcbiAgICBzdGF0aWMgZ2V0Qm91bmRzKHBvbHlnb246IElMYXRMbmdbXSwgcGFkZGluZzogbnVtYmVyID0gMCk6IEwuTGF0TG5nQm91bmRzIHtcclxuICAgICAgICBjb25zdCB0bXBMYXRMbmc6IEwuTGF0TG5nW10gPSBbXTtcclxuICAgICAgICBwb2x5Z29uLmZvckVhY2gobGwgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNOYU4obGwubGF0KSB8fCBpc05hTihsbC5sbmcpKSB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdG1wTGF0TG5nLnB1c2gobGwgYXMgTC5MYXRMbmcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHBvbHlMaW5lOiBMLlBvbHlsaW5lID0gbmV3IEwuUG9seWxpbmUodG1wTGF0TG5nKTtcclxuICAgICAgICBjb25zdCBib3VuZHMgPSBwb2x5TGluZS5nZXRCb3VuZHMoKTtcclxuICAgICAgICBpZiAocGFkZGluZyAhPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYm91bmRzLnBhZChwYWRkaW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJvdW5kcztcclxuICAgIH1cclxufVxyXG4vL1RPRE8gbWFrZSBjb21wYXNzIElMYXRMbmdcclxuZXhwb3J0IGNsYXNzIENvbXBhc3Mge1xyXG5cclxuICAgIHB1YmxpYyBkaXJlY3Rpb246IElDb21wYXNzID0ge1xyXG4gICAgICAgIC8vIEJvdW5kaW5nQm94Q2VudGVyOiB7IGxhdDogMCwgbG5nOiAwIH0sXHJcbiAgICAgICAgLy8gQ2VudGVyT2ZNYXNzOiB7IGxhdDogMCwgbG5nOiAwIH0sXHJcbiAgICAgICAgRWFzdDogeyBsYXQ6IDAsIGxuZzogMCB9LFxyXG4gICAgICAgIE5vcnRoOiB7IGxhdDogMCwgbG5nOiAwIH0sXHJcbiAgICAgICAgTm9ydGhFYXN0OiB7IGxhdDogMCwgbG5nOiAwIH0sXHJcbiAgICAgICAgTm9ydGhXZXN0OiB7IGxhdDogMCwgbG5nOiAwIH0sXHJcbiAgICAgICAgU291dGg6IHsgbGF0OiAwLCBsbmc6IDAgfSxcclxuICAgICAgICBTb3V0aEVhc3Q6IHsgbGF0OiAwLCBsbmc6IDAgfSxcclxuICAgICAgICBTb3V0aFdlc3Q6IHsgbGF0OiAwLCBsbmc6IDAgfSxcclxuICAgICAgICBXZXN0OiB7IGxhdDogMCwgbG5nOiAwIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IobWluTGF0OiBudW1iZXIgPSAwLCBtaW5Mbmc6IG51bWJlciA9IDAsIG1heExhdDogbnVtYmVyID0gMCwgbWF4TG5nOiBudW1iZXIgPSAwKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uLk5vcnRoID0geyBsYXQ6IG1heExhdCwgbG5nOiAobWluTG5nICsgbWF4TG5nKSAvIDIgfTtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbi5Ob3J0aEVhc3QgPSB7IGxhdDogbWF4TGF0LCBsbmc6IG1heExuZyB9O1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uLkVhc3QgPSB7IGxhdDogKG1pbkxhdCArIG1heExhdCkgLyAyLCBsbmc6IG1heExuZyB9O1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uLlNvdXRoRWFzdCA9IHsgbGF0OiBtaW5MYXQsIGxuZzogbWF4TG5nIH07XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24uU291dGggPSB7IGxhdDogbWluTGF0LCBsbmc6IChtaW5MbmcgKyBtYXhMbmcpIC8gMiB9O1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uLlNvdXRoV2VzdCA9IHsgbGF0OiBtaW5MYXQsIGxuZzogbWluTG5nIH07XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24uV2VzdCA9IHsgbGF0OiAobWluTGF0ICsgbWF4TGF0KSAvIDIsIGxuZzogbWluTG5nIH07XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24uTm9ydGhXZXN0ID0geyBsYXQ6IG1heExhdCwgbG5nOiBtaW5MbmcgfTtcclxuICAgICAgICAvLyB0aGlzLmRpcmVjdGlvbi5DZW50ZXJPZk1hc3MgPSB7IGxhdDogMCwgbG5nOiAwIH07XHJcbiAgICAgICAgLy8gdGhpcy5kaXJlY3Rpb24uQm91bmRpbmdCb3hDZW50ZXIgPSB7bGF0OiAobWluTGF0ICsgbWF4TGF0KSAvIDIsIGxuZzogKG1pbkxuZyArIG1heExuZykgLyAyfTtcclxuICAgIH1cclxuICAgIC8vVE9ETyBkZWZhdWx0IHJldHVybi5cclxuICAgIGdldERpcmVjdGlvbihkaXJlY3Rpb246IE1hcmtlclBvc2l0aW9uKSB7XHJcbiAgICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgLy8gY2FzZSBNYXJrZXJQb3NpdGlvbi5DZW50ZXJPZk1hc3M6XHJcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb24uQ2VudGVyT2ZNYXNzO1xyXG4gICAgICAgICAgICBjYXNlIE1hcmtlclBvc2l0aW9uLk5vcnRoOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uLk5vcnRoO1xyXG4gICAgICAgICAgICBjYXNlIE1hcmtlclBvc2l0aW9uLk5vcnRoRWFzdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbi5Ob3J0aEVhc3Q7XHJcbiAgICAgICAgICAgIGNhc2UgTWFya2VyUG9zaXRpb24uRWFzdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbi5FYXN0O1xyXG4gICAgICAgICAgICBjYXNlIE1hcmtlclBvc2l0aW9uLlNvdXRoRWFzdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbi5Tb3V0aEVhc3Q7XHJcbiAgICAgICAgICAgIGNhc2UgTWFya2VyUG9zaXRpb24uU291dGg6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb24uU291dGg7XHJcbiAgICAgICAgICAgIGNhc2UgTWFya2VyUG9zaXRpb24uU291dGhXZXN0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uLlNvdXRoV2VzdDtcclxuICAgICAgICAgICAgY2FzZSBNYXJrZXJQb3NpdGlvbi5XZXN0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uLldlc3Q7XHJcbiAgICAgICAgICAgIGNhc2UgTWFya2VyUG9zaXRpb24uTm9ydGhXZXN0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uLk5vcnRoV2VzdDtcclxuICAgICAgICAgICAgLy8gY2FzZSBNYXJrZXJQb3NpdGlvbi5Cb3VuZGluZ0JveENlbnRlcjpcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbi5Cb3VuZGluZ0JveENlbnRlcjtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbi5Ob3J0aDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvL1RPRE8gc3RhcnROb2RlLCBnbyBjbG9ja3dpc2Ugb3Igbm90XHJcbiAgICBnZXRQb3NpdGlvbnMoc3RhcnROb2RlOiBNYXJrZXJQb3NpdGlvbiA9IE1hcmtlclBvc2l0aW9uLlNvdXRoV2VzdCwgY2xvY2t3aXNlOiBib29sZWFuID0gZmFsc2UsIGFkZENsb3NpbmdOb2RlOiBib29sZWFuID0gdHJ1ZSk6IG51bWJlcltdW10ge1xyXG5cclxuICAgICAgICBsZXQgcG9zaXRpb25zOiBudW1iZXJbXVtdID0gW107XHJcblxyXG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKFt0aGlzLmRpcmVjdGlvbi5Tb3V0aFdlc3QubG5nLCB0aGlzLmRpcmVjdGlvbi5Tb3V0aFdlc3QubGF0XSk7XHJcbiAgICAgICAgcG9zaXRpb25zLnB1c2goW3RoaXMuZGlyZWN0aW9uLlNvdXRoV2VzdC5sbmcsIHRoaXMuZGlyZWN0aW9uLlNvdXRoV2VzdC5sYXRdKTtcclxuICAgICAgICBwb3NpdGlvbnMucHVzaChbdGhpcy5kaXJlY3Rpb24uU291dGgubG5nLCB0aGlzLmRpcmVjdGlvbi5Tb3V0aC5sYXRdKTtcclxuICAgICAgICBwb3NpdGlvbnMucHVzaChbdGhpcy5kaXJlY3Rpb24uU291dGhFYXN0LmxuZywgdGhpcy5kaXJlY3Rpb24uU291dGhFYXN0LmxhdF0pO1xyXG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKFt0aGlzLmRpcmVjdGlvbi5FYXN0LmxuZywgdGhpcy5kaXJlY3Rpb24uRWFzdC5sYXRdKTtcclxuICAgICAgICBwb3NpdGlvbnMucHVzaChbdGhpcy5kaXJlY3Rpb24uTm9ydGhFYXN0LmxuZywgdGhpcy5kaXJlY3Rpb24uTm9ydGhFYXN0LmxhdF0pO1xyXG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKFt0aGlzLmRpcmVjdGlvbi5Ob3J0aC5sbmcsIHRoaXMuZGlyZWN0aW9uLk5vcnRoLmxhdF0pO1xyXG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKFt0aGlzLmRpcmVjdGlvbi5Ob3J0aFdlc3QubG5nLCB0aGlzLmRpcmVjdGlvbi5Ob3J0aFdlc3QubGF0XSk7XHJcbiAgICAgICAgcG9zaXRpb25zLnB1c2goW3RoaXMuZGlyZWN0aW9uLldlc3QubG5nLCB0aGlzLmRpcmVjdGlvbi5XZXN0LmxhdF0pO1xyXG4gICAgICAgIGlmIChhZGRDbG9zaW5nTm9kZSkge1xyXG4gICAgICAgICAgICBwb3NpdGlvbnMucHVzaChbdGhpcy5kaXJlY3Rpb24uU291dGhXZXN0LmxuZywgdGhpcy5kaXJlY3Rpb24uU291dGhXZXN0LmxhdF0pO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICByZXR1cm4gcG9zaXRpb25zO1xyXG4gICAgfVxyXG59Il19