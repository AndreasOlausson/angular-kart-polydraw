import * as L from "leaflet";
import { MarkerPosition } from "./enums";
export class PolyDrawUtil {
    static getBounds(polygon, padding = 0) {
        const tmpLatLng = [];
        polygon.forEach(ll => {
            if (isNaN(ll.lat) || isNaN(ll.lng)) {
            }
            tmpLatLng.push(ll);
        });
        const polyLine = new L.Polyline(tmpLatLng);
        const bounds = polyLine.getBounds();
        if (padding !== 0) {
            return bounds.pad(padding);
        }
        return bounds;
    }
}
//TODO make compass ILatLng
export class Compass {
    constructor(minLat = 0, minLng = 0, maxLat = 0, maxLng = 0) {
        this.direction = {
            // BoundingBoxCenter: { lat: 0, lng: 0 },
            // CenterOfMass: { lat: 0, lng: 0 },
            East: { lat: 0, lng: 0 },
            North: { lat: 0, lng: 0 },
            NorthEast: { lat: 0, lng: 0 },
            NorthWest: { lat: 0, lng: 0 },
            South: { lat: 0, lng: 0 },
            SouthEast: { lat: 0, lng: 0 },
            SouthWest: { lat: 0, lng: 0 },
            West: { lat: 0, lng: 0 }
        };
        this.direction.North = { lat: maxLat, lng: (minLng + maxLng) / 2 };
        this.direction.NorthEast = { lat: maxLat, lng: maxLng };
        this.direction.East = { lat: (minLat + maxLat) / 2, lng: maxLng };
        this.direction.SouthEast = { lat: minLat, lng: maxLng };
        this.direction.South = { lat: minLat, lng: (minLng + maxLng) / 2 };
        this.direction.SouthWest = { lat: minLat, lng: minLng };
        this.direction.West = { lat: (minLat + maxLat) / 2, lng: minLng };
        this.direction.NorthWest = { lat: maxLat, lng: minLng };
        // this.direction.CenterOfMass = { lat: 0, lng: 0 };
        // this.direction.BoundingBoxCenter = {lat: (minLat + maxLat) / 2, lng: (minLng + maxLng) / 2};
    }
    //TODO default return.
    getDirection(direction) {
        switch (direction) {
            // case MarkerPosition.CenterOfMass:
            //     return this.direction.CenterOfMass;
            case MarkerPosition.North:
                return this.direction.North;
            case MarkerPosition.NorthEast:
                return this.direction.NorthEast;
            case MarkerPosition.East:
                return this.direction.East;
            case MarkerPosition.SouthEast:
                return this.direction.SouthEast;
            case MarkerPosition.South:
                return this.direction.South;
            case MarkerPosition.SouthWest:
                return this.direction.SouthWest;
            case MarkerPosition.West:
                return this.direction.West;
            case MarkerPosition.NorthWest:
                return this.direction.NorthWest;
            // case MarkerPosition.BoundingBoxCenter:
            //     return this.direction.BoundingBoxCenter;
            default:
                return this.direction.North;
        }
    }
    //TODO startNode, go clockwise or not
    getPositions(startNode = MarkerPosition.SouthWest, clockwise = false, addClosingNode = true) {
        let positions = [];
        positions.push([this.direction.SouthWest.lng, this.direction.SouthWest.lat]);
        positions.push([this.direction.SouthWest.lng, this.direction.SouthWest.lat]);
        positions.push([this.direction.South.lng, this.direction.South.lat]);
        positions.push([this.direction.SouthEast.lng, this.direction.SouthEast.lat]);
        positions.push([this.direction.East.lng, this.direction.East.lat]);
        positions.push([this.direction.NorthEast.lng, this.direction.NorthEast.lat]);
        positions.push([this.direction.North.lng, this.direction.North.lat]);
        positions.push([this.direction.NorthWest.lng, this.direction.NorthWest.lat]);
        positions.push([this.direction.West.lng, this.direction.West.lat]);
        if (addClosingNode) {
            positions.push([this.direction.SouthWest.lng, this.direction.SouthWest.lat]);
        }
        return positions;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9teS1saWIvIiwic291cmNlcyI6WyJsaWIvdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxLQUFLLENBQUMsTUFBTSxTQUFTLENBQUM7QUFFN0IsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUV6QyxNQUFNLE9BQU8sWUFBWTtJQUNyQixNQUFNLENBQUMsU0FBUyxDQUFDLE9BQWtCLEVBQUUsVUFBa0IsQ0FBQztRQUNwRCxNQUFNLFNBQVMsR0FBZSxFQUFFLENBQUM7UUFDakMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNqQixJQUFJLEtBQUssQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRTthQUNuQztZQUNELFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBYyxDQUFDLENBQUM7UUFDbkMsQ0FBQyxDQUFDLENBQUM7UUFDSCxNQUFNLFFBQVEsR0FBZSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDdkQsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ3BDLElBQUksT0FBTyxLQUFLLENBQUMsRUFBRTtZQUNmLE9BQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUM5QjtRQUNELE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7Q0FDSjtBQUNELDJCQUEyQjtBQUMzQixNQUFNLE9BQU8sT0FBTztJQWVoQixZQUFZLFNBQWlCLENBQUMsRUFBRSxTQUFpQixDQUFDLEVBQUUsU0FBaUIsQ0FBQyxFQUFFLFNBQWlCLENBQUM7UUFibkYsY0FBUyxHQUFhO1lBQ3pCLHlDQUF5QztZQUN6QyxvQ0FBb0M7WUFDcEMsSUFBSSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFO1lBQ3hCLEtBQUssRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRTtZQUN6QixTQUFTLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUU7WUFDN0IsU0FBUyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFO1lBQzdCLEtBQUssRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRTtZQUN6QixTQUFTLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUU7WUFDN0IsU0FBUyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFO1lBQzdCLElBQUksRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRTtTQUMzQixDQUFDO1FBSUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztRQUNuRSxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsR0FBRyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxDQUFDO1FBQ3hELElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLENBQUM7UUFDbEUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEdBQUcsRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsQ0FBQztRQUN4RCxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxFQUFFLEdBQUcsRUFBRSxNQUFN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RyxDQUFDLENBQUMsQ0FBQztRQUNuRSxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDN0UsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JFLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM3RSxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkUsSUFBSSxjQUFjLEVBQUU7WUFDaEIsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQ2hGO1FBSUQsT0FBTyxTQUFTLENBQUM7SUFDckIsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSUNvbXBhc3MgfSBmcm9tIFwiLi9pbnRlcmZhY2VcIjtcbmltcG9ydCAqIGFzIEwgZnJvbSBcImxlYWZsZXRcIjtcbmltcG9ydCB7IElMYXRMbmcgfSBmcm9tIFwiLi9wb2x5Z29uLWhlbHBlcnNcIjtcbmltcG9ydCB7IE1hcmtlclBvc2l0aW9uIH0gZnJvbSBcIi4vZW51bXNcIjtcblxuZXhwb3J0IGNsYXNzIFBvbHlEcmF3VXRpbCB7XG4gICAgc3RhdGljIGdldEJvdW5kcyhwb2x5Z29uOiBJTGF0TG5nW10sIHBhZGRpbmc6IG51bWJlciA9IDApOiBMLkxhdExuZ0JvdW5kcyB7XG4gICAgICAgIGNvbnN0IHRtcExhdExuZzogTC5MYXRMbmdbXSA9IFtdO1xuICAgICAgICBwb2x5Z29uLmZvckVhY2gobGwgPT4ge1xuICAgICAgICAgICAgaWYgKGlzTmFOKGxsLmxhdCkgfHwgaXNOYU4obGwubG5nKSkge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG1wTGF0TG5nLnB1c2gobGwgYXMgTC5MYXRMbmcpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcG9seUxpbmU6IEwuUG9seWxpbmUgPSBuZXcgTC5Qb2x5bGluZSh0bXBMYXRMbmcpO1xuICAgICAgICBjb25zdCBib3VuZHMgPSBwb2x5TGluZS5nZXRCb3VuZHMoKTtcbiAgICAgICAgaWYgKHBhZGRpbmcgIT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBib3VuZHMucGFkKHBhZGRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBib3VuZHM7XG4gICAgfVxufVxuLy9UT0RPIG1ha2UgY29tcGFzcyBJTGF0TG5nXG5leHBvcnQgY2xhc3MgQ29tcGFzcyB7XG5cbiAgICBwdWJsaWMgZGlyZWN0aW9uOiBJQ29tcGFzcyA9IHtcbiAgICAgICAgLy8gQm91bmRpbmdCb3hDZW50ZXI6IHsgbGF0OiAwLCBsbmc6IDAgfSxcbiAgICAgICAgLy8gQ2VudGVyT2ZNYXNzOiB7IGxhdDogMCwgbG5nOiAwIH0sXG4gICAgICAgIEVhc3Q6IHsgbGF0OiAwLCBsbmc6IDAgfSxcbiAgICAgICAgTm9ydGg6IHsgbGF0OiAwLCBsbmc6IDAgfSxcbiAgICAgICAgTm9ydGhFYXN0OiB7IGxhdDogMCwgbG5nOiAwIH0sXG4gICAgICAgIE5vcnRoV2VzdDogeyBsYXQ6IDAsIGxuZzogMCB9LFxuICAgICAgICBTb3V0aDogeyBsYXQ6IDAsIGxuZzogMCB9LFxuICAgICAgICBTb3V0aEVhc3Q6IHsgbGF0OiAwLCBsbmc6IDAgfSxcbiAgICAgICAgU291dGhXZXN0OiB7IGxhdDogMCwgbG5nOiAwIH0sXG4gICAgICAgIFdlc3Q6IHsgbGF0OiAwLCBsbmc6IDAgfVxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3RvcihtaW5MYXQ6IG51bWJlciA9IDAsIG1pbkxuZzogbnVtYmVyID0gMCwgbWF4TGF0OiBudW1iZXIgPSAwLCBtYXhMbmc6IG51bWJlciA9IDApIHtcblxuICAgICAgICB0aGlzLmRpcmVjdGlvbi5Ob3J0aCA9IHsgbGF0OiBtYXhMYXQsIGxuZzogKG1pbkxuZyArIG1heExuZykgLyAyIH07XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uLk5vcnRoRWFzdCA9IHsgbGF0OiBtYXhMYXQsIGxuZzogbWF4TG5nIH07XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uLkVhc3QgPSB7IGxhdDogKG1pbkxhdCArIG1heExhdCkgLyAyLCBsbmc6IG1heExuZyB9O1xuICAgICAgICB0aGlzLmRpcmVjdGlvbi5Tb3V0aEVhc3QgPSB7IGxhdDogbWluTGF0LCBsbmc6IG1heExuZyB9O1xuICAgICAgICB0aGlzLmRpcmVjdGlvbi5Tb3V0aCA9IHsgbGF0OiBtaW5MYXQsIGxuZzogKG1pbkxuZyArIG1heExuZykgLyAyIH07XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uLlNvdXRoV2VzdCA9IHsgbGF0OiBtaW5MYXQsIGxuZzogbWluTG5nIH07XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uLldlc3QgPSB7IGxhdDogKG1pbkxhdCArIG1heExhdCkgLyAyLCBsbmc6IG1pbkxuZyB9O1xuICAgICAgICB0aGlzLmRpcmVjdGlvbi5Ob3J0aFdlc3QgPSB7IGxhdDogbWF4TGF0LCBsbmc6IG1pbkxuZyB9O1xuICAgICAgICAvLyB0aGlzLmRpcmVjdGlvbi5DZW50ZXJPZk1hc3MgPSB7IGxhdDogMCwgbG5nOiAwIH07XG4gICAgICAgIC8vIHRoaXMuZGlyZWN0aW9uLkJvdW5kaW5nQm94Q2VudGVyID0ge2xhdDogKG1pbkxhdCArIG1heExhdCkgLyAyLCBsbmc6IChtaW5MbmcgKyBtYXhMbmcpIC8gMn07XG4gICAgfVxuICAgIC8vVE9ETyBkZWZhdWx0IHJldHVybi5cbiAgICBnZXREaXJlY3Rpb24oZGlyZWN0aW9uOiBNYXJrZXJQb3NpdGlvbikge1xuICAgICAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgLy8gY2FzZSBNYXJrZXJQb3NpdGlvbi5DZW50ZXJPZk1hc3M6XG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uLkNlbnRlck9mTWFzcztcbiAgICAgICAgICAgIGNhc2UgTWFya2VyUG9zaXRpb24uTm9ydGg6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uLk5vcnRoO1xuICAgICAgICAgICAgY2FzZSBNYXJrZXJQb3NpdGlvbi5Ob3J0aEVhc3Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uLk5vcnRoRWFzdDtcbiAgICAgICAgICAgIGNhc2UgTWFya2VyUG9zaXRpb24uRWFzdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb24uRWFzdDtcbiAgICAgICAgICAgIGNhc2UgTWFya2VyUG9zaXRpb24uU291dGhFYXN0OlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbi5Tb3V0aEVhc3Q7XG4gICAgICAgICAgICBjYXNlIE1hcmtlclBvc2l0aW9uLlNvdXRoOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbi5Tb3V0aDtcbiAgICAgICAgICAgIGNhc2UgTWFya2VyUG9zaXRpb24uU291dGhXZXN0OlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbi5Tb3V0aFdlc3Q7XG4gICAgICAgICAgICBjYXNlIE1hcmtlclBvc2l0aW9uLldlc3Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uLldlc3Q7XG4gICAgICAgICAgICBjYXNlIE1hcmtlclBvc2l0aW9uLk5vcnRoV2VzdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb24uTm9ydGhXZXN0O1xuICAgICAgICAgICAgLy8gY2FzZSBNYXJrZXJQb3NpdGlvbi5Cb3VuZGluZ0JveENlbnRlcjpcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb24uQm91bmRpbmdCb3hDZW50ZXI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbi5Ob3J0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvL1RPRE8gc3RhcnROb2RlLCBnbyBjbG9ja3dpc2Ugb3Igbm90XG4gICAgZ2V0UG9zaXRpb25zKHN0YXJ0Tm9kZTogTWFya2VyUG9zaXRpb24gPSBNYXJrZXJQb3NpdGlvbi5Tb3V0aFdlc3QsIGNsb2Nrd2lzZTogYm9vbGVhbiA9IGZhbHNlLCBhZGRDbG9zaW5nTm9kZTogYm9vbGVhbiA9IHRydWUpOiBudW1iZXJbXVtdIHtcblxuICAgICAgICBsZXQgcG9zaXRpb25zOiBudW1iZXJbXVtdID0gW107XG5cbiAgICAgICAgcG9zaXRpb25zLnB1c2goW3RoaXMuZGlyZWN0aW9uLlNvdXRoV2VzdC5sbmcsIHRoaXMuZGlyZWN0aW9uLlNvdXRoV2VzdC5sYXRdKTtcbiAgICAgICAgcG9zaXRpb25zLnB1c2goW3RoaXMuZGlyZWN0aW9uLlNvdXRoV2VzdC5sbmcsIHRoaXMuZGlyZWN0aW9uLlNvdXRoV2VzdC5sYXRdKTtcbiAgICAgICAgcG9zaXRpb25zLnB1c2goW3RoaXMuZGlyZWN0aW9uLlNvdXRoLmxuZywgdGhpcy5kaXJlY3Rpb24uU291dGgubGF0XSk7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKFt0aGlzLmRpcmVjdGlvbi5Tb3V0aEVhc3QubG5nLCB0aGlzLmRpcmVjdGlvbi5Tb3V0aEVhc3QubGF0XSk7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKFt0aGlzLmRpcmVjdGlvbi5FYXN0LmxuZywgdGhpcy5kaXJlY3Rpb24uRWFzdC5sYXRdKTtcbiAgICAgICAgcG9zaXRpb25zLnB1c2goW3RoaXMuZGlyZWN0aW9uLk5vcnRoRWFzdC5sbmcsIHRoaXMuZGlyZWN0aW9uLk5vcnRoRWFzdC5sYXRdKTtcbiAgICAgICAgcG9zaXRpb25zLnB1c2goW3RoaXMuZGlyZWN0aW9uLk5vcnRoLmxuZywgdGhpcy5kaXJlY3Rpb24uTm9ydGgubGF0XSk7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKFt0aGlzLmRpcmVjdGlvbi5Ob3J0aFdlc3QubG5nLCB0aGlzLmRpcmVjdGlvbi5Ob3J0aFdlc3QubGF0XSk7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKFt0aGlzLmRpcmVjdGlvbi5XZXN0LmxuZywgdGhpcy5kaXJlY3Rpb24uV2VzdC5sYXRdKTtcbiAgICAgICAgaWYgKGFkZENsb3NpbmdOb2RlKSB7XG4gICAgICAgICAgICBwb3NpdGlvbnMucHVzaChbdGhpcy5kaXJlY3Rpb24uU291dGhXZXN0LmxuZywgdGhpcy5kaXJlY3Rpb24uU291dGhXZXN0LmxhdF0pO1xuICAgICAgICB9XG5cblxuXG4gICAgICAgIHJldHVybiBwb3NpdGlvbnM7XG4gICAgfVxufSJdfQ==