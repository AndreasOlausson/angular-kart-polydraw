import { PolygonUtil } from './polygon.util';
export class PolygonInfo {
    constructor(polygon) {
        this.polygon = [];
        this.trashcanPoint = [];
        this.sqmArea = [];
        this.perimeter = [];
        console.log('PolygonInfo: ', polygon);
        polygon.forEach((polygons, i) => {
            this.trashcanPoint[i] = this.getTrashcanPoint(polygons[0]);
            this.sqmArea[i] = this.calculatePolygonArea(polygons[0]);
            this.perimeter[i] = this.calculatePolygonPerimeter(polygons[0]);
            console.log(polygons[0]);
            this.polygon[i] = polygons;
        });
    }
    setSqmArea(area) {
        this.sqmArea[0] = area;
    }
    getTrashcanPoint(polygon) {
        const res = Math.max.apply(Math, polygon.map(o => o.lat));
        const idx = polygon.findIndex(o => o.lat === res);
        let previousPoint;
        let nextPoint;
        if (idx > 0) {
            previousPoint = polygon[idx - 1];
            if (idx < polygon.length - 1) {
                nextPoint = polygon[idx + 1];
            }
            else {
                nextPoint = polygon[0];
            }
        }
        else {
            previousPoint = polygon[polygon.length - 1];
            nextPoint = polygon[idx + 1];
        }
        const secondPoint = previousPoint.lng < nextPoint.lng ? previousPoint : nextPoint;
        const midpoint = PolygonUtil.getMidPoint(polygon[idx], secondPoint);
        return midpoint;
    }
    calculatePolygonArea(polygon) {
        const area = PolygonUtil.getSqmArea(polygon);
        return area;
    }
    calculatePolygonPerimeter(polygon) {
        const perimeter = PolygonUtil.getPerimeter(polygon);
        return perimeter;
    }
}
const addClass = (selector, className) => {
    const elements = document.querySelectorAll(selector);
    for (let i = 0; i < elements.length; i++) {
        elements.item(i).classList.add(className);
    }
};
const ɵ0 = addClass;
const removeClass = (selector, className) => {
    const elements = document.querySelectorAll(selector);
    for (let i = 0; i < elements.length; i++) {
        elements.item(i).classList.remove(className);
    }
};
const ɵ1 = removeClass;
export class PolygonDrawStates {
    constructor() {
        this.canUsePolyDraw = false;
        this.reset();
    }
    activate() {
        this.reset();
        this.isActivated = true;
    }
    reset() {
        this.isActivated = false;
        this.hasPolygons = false;
        this.canRevert = false;
        this.isAuto = false;
        this.resetDrawModes();
    }
    resetDrawModes() {
        this.isFreeDrawMode = false;
        removeClass('img.leaflet-tile', 'disable-events');
        this.isMoveMode = false;
    }
    setFreeDrawMode(isAuto = false) {
        if (isAuto) {
            this.isActivated = true;
        }
        if (this.isActivated) {
            this.resetDrawModes();
            this.isFreeDrawMode = true;
            addClass('img.leaflet-tile', 'disable-events');
            if (isAuto) {
                this.isAuto = true;
            }
        }
    }
    setMoveMode() {
        if (this.isActivated) {
            this.resetDrawModes();
            this.isMoveMode = true;
        }
    }
    forceCanUseFreeDraw() {
        this.canUsePolyDraw = true;
    }
}
export { ɵ0, ɵ1 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9seWdvbi1oZWxwZXJzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbXktbGliLyIsInNvdXJjZXMiOlsibGliL3BvbHlnb24taGVscGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFN0MsTUFBTSxPQUFPLFdBQVc7SUFLdEIsWUFBWSxPQUFPO1FBSm5CLFlBQU8sR0FBa0IsRUFBRSxDQUFDO1FBQzVCLGtCQUFhLEdBQWMsRUFBRSxDQUFDO1FBQzlCLFlBQU8sR0FBYSxFQUFFLENBQUM7UUFDdkIsY0FBUyxHQUFhLEVBQUUsQ0FBQztRQUV2QixPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN0QyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzlCLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNELElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3pELElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLHlCQUF5QixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2hFLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDekIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUM7UUFDN0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBQ0QsVUFBVSxDQUFDLElBQVk7UUFDckIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxJ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QUFJLENBQUM7SUFDN0IsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUG9seWdvblV0aWwgfSBmcm9tICcuL3BvbHlnb24udXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBQb2x5Z29uSW5mbyB7XG4gIHBvbHlnb246IElMYXRMbmdbXVtdW10gPSBbXTtcbiAgdHJhc2hjYW5Qb2ludDogSUxhdExuZ1tdID0gW107XG4gIHNxbUFyZWE6IG51bWJlcltdID0gW107XG4gIHBlcmltZXRlcjogbnVtYmVyW10gPSBbXTtcbiAgY29uc3RydWN0b3IocG9seWdvbikge1xuICAgIGNvbnNvbGUubG9nKCdQb2x5Z29uSW5mbzogJywgcG9seWdvbik7XG4gICAgcG9seWdvbi5mb3JFYWNoKChwb2x5Z29ucywgaSkgPT4ge1xuICAgICAgdGhpcy50cmFzaGNhblBvaW50W2ldID0gdGhpcy5nZXRUcmFzaGNhblBvaW50KHBvbHlnb25zWzBdKTtcbiAgICAgIHRoaXMuc3FtQXJlYVtpXSA9IHRoaXMuY2FsY3VsYXRlUG9seWdvbkFyZWEocG9seWdvbnNbMF0pO1xuICAgICAgdGhpcy5wZXJpbWV0ZXJbaV0gPSB0aGlzLmNhbGN1bGF0ZVBvbHlnb25QZXJpbWV0ZXIocG9seWdvbnNbMF0pO1xuICAgICAgY29uc29sZS5sb2cocG9seWdvbnNbMF0pO1xuICAgICAgdGhpcy5wb2x5Z29uW2ldID0gcG9seWdvbnM7XG4gICAgfSk7XG4gIH1cbiAgc2V0U3FtQXJlYShhcmVhOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnNxbUFyZWFbMF0gPSBhcmVhO1xuICB9XG4gIHByaXZhdGUgZ2V0VHJhc2hjYW5Qb2ludChwb2x5Z29uOiBJTGF0TG5nW10pOiBJTGF0TG5nIHtcbiAgICBjb25zdCByZXMgPSBNYXRoLm1heC5hcHBseShcbiAgICAgIE1hdGgsXG4gICAgICBwb2x5Z29uLm1hcChvID0+IG8ubGF0KVxuICAgICk7XG4gICAgY29uc3QgaWR4ID0gcG9seWdvbi5maW5kSW5kZXgobyA9PiBvLmxhdCA9PT0gcmVzKTtcblxuICAgIGxldCBwcmV2aW91c1BvaW50OiBJTGF0TG5nO1xuICAgIGxldCBuZXh0UG9pbnQ6IElMYXRMbmc7XG5cbiAgICBpZiAoaWR4ID4gMCkge1xuICAgICAgcHJldmlvdXNQb2ludCA9IHBvbHlnb25baWR4IC0gMV07XG4gICAgICBpZiAoaWR4IDwgcG9seWdvbi5sZW5ndGggLSAxKSB7XG4gICAgICAgIG5leHRQb2ludCA9IHBvbHlnb25baWR4ICsgMV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0UG9pbnQgPSBwb2x5Z29uWzBdO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwcmV2aW91c1BvaW50ID0gcG9seWdvbltwb2x5Z29uLmxlbmd0aCAtIDFdO1xuICAgICAgbmV4dFBvaW50ID0gcG9seWdvbltpZHggKyAxXTtcbiAgICB9XG5cbiAgICBjb25zdCBzZWNvbmRQb2ludCA9XG4gICAgICBwcmV2aW91c1BvaW50LmxuZyA8IG5leHRQb2ludC5sbmcgPyBwcmV2aW91c1BvaW50IDogbmV4dFBvaW50O1xuXG4gICAgY29uc3QgbWlkcG9pbnQgPSBQb2x5Z29uVXRpbC5nZXRNaWRQb2ludChwb2x5Z29uW2lkeF0sIHNlY29uZFBvaW50KTtcblxuICAgIHJldHVybiBtaWRwb2ludDtcbiAgfVxuICBwcml2YXRlIGNhbGN1bGF0ZVBvbHlnb25BcmVhKHBvbHlnb246IElMYXRMbmdbXSk6IG51bWJlciB7XG4gICAgY29uc3QgYXJlYSA9IFBvbHlnb25VdGlsLmdldFNxbUFyZWEocG9seWdvbiBhcyBhbnkpO1xuICAgIHJldHVybiBhcmVhO1xuICB9XG4gIHByaXZhdGUgY2FsY3VsYXRlUG9seWdvblBlcmltZXRlcihwb2x5Z29uOiBJTGF0TG5nW10pOiBudW1iZXIge1xuICAgIGNvbnN0IHBlcmltZXRlciA9IFBvbHlnb25VdGlsLmdldFBlcmltZXRlcihwb2x5Z29uIGFzIGFueSk7XG4gICAgcmV0dXJuIHBlcmltZXRlcjtcbiAgfVxufVxuY29uc3QgYWRkQ2xhc3M6IChzZWxlY3Rvcjogc3RyaW5nLCBjbGFzc05hbWU6IHN0cmluZykgPT4gdm9pZCA9IChcbiAgc2VsZWN0b3I6IHN0cmluZyxcbiAgY2xhc3NOYW1lOiBzdHJpbmdcbik6IHZvaWQgPT4ge1xuICBjb25zdCBlbGVtZW50czogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGVsZW1lbnRzLml0ZW0oaSkuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICB9XG59O1xuXG5jb25zdCByZW1vdmVDbGFzczogKHNlbGVjdG9yOiBzdHJpbmcsIGNsYXNzTmFtZTogc3RyaW5nKSA9PiB2b2lkID0gKFxuICBzZWxlY3Rvcjogc3RyaW5nLFxuICBjbGFzc05hbWU6IHN0cmluZ1xuKTogdm9pZCA9PiB7XG4gIGNvbnN0IGVsZW1lbnRzOiBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgZWxlbWVudHMuaXRlbShpKS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gIH1cbn07XG5cbmV4cG9ydCBjbGFzcyBQb2x5Z29uRHJhd1N0YXRlcyB7XG4gIGlzQWN0aXZhdGVkOiBib29sZWFuO1xuICBpc0ZyZWVEcmF3TW9kZTogYm9vbGVhbjtcbiAgaXNNb3ZlTW9kZTogYm9vbGVhbjtcbiAgY2FuUmV2ZXJ0OiBib29sZWFuO1xuICBpc0F1dG86IGJvb2xlYW47XG4gIGhhc1BvbHlnb25zOiBib29sZWFuO1xuICBjYW5Vc2VQb2x5RHJhdzogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNhblVzZVBvbHlEcmF3ID0gZmFsc2U7XG4gICAgdGhpcy5yZXNldCgpO1xuICB9XG5cbiAgYWN0aXZhdGUoKTogdm9pZCB7XG4gICAgdGhpcy5yZXNldCgpO1xuICAgIHRoaXMuaXNBY3RpdmF0ZWQgPSB0cnVlO1xuICB9XG5cbiAgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5pc0FjdGl2YXRlZCA9IGZhbHNlO1xuICAgIHRoaXMuaGFzUG9seWdvbnMgPSBmYWxzZTtcbiAgICB0aGlzLmNhblJldmVydCA9IGZhbHNlO1xuICAgIHRoaXMuaXNBdXRvID0gZmFsc2U7XG5cbiAgICB0aGlzLnJlc2V0RHJhd01vZGVzKCk7XG4gIH1cblxuICByZXNldERyYXdNb2RlcygpOiB2b2lkIHtcbiAgICB0aGlzLmlzRnJlZURyYXdNb2RlID0gZmFsc2U7XG4gICAgcmVtb3ZlQ2xhc3MoJ2ltZy5sZWFmbGV0LXRpbGUnLCAnZGlzYWJsZS1ldmVudHMnKTtcbiAgICB0aGlzLmlzTW92ZU1vZGUgPSBmYWxzZTtcbiAgfVxuXG4gIHNldEZyZWVEcmF3TW9kZShpc0F1dG86IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIGlmIChpc0F1dG8pIHtcbiAgICAgIHRoaXMuaXNBY3RpdmF0ZWQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodGhpcy5pc0FjdGl2YXRlZCkge1xuICAgICAgdGhpcy5yZXNldERyYXdNb2RlcygpO1xuICAgICAgdGhpcy5pc0ZyZWVEcmF3TW9kZSA9IHRydWU7XG4gICAgICBhZGRDbGFzcygnaW1nLmxlYWZsZXQtdGlsZScsICdkaXNhYmxlLWV2ZW50cycpO1xuICAgICAgaWYgKGlzQXV0bykge1xuICAgICAgICB0aGlzLmlzQXV0byA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0TW92ZU1vZGUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNBY3RpdmF0ZWQpIHtcbiAgICAgIHRoaXMucmVzZXREcmF3TW9kZXMoKTtcbiAgICAgIHRoaXMuaXNNb3ZlTW9kZSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgZm9yY2VDYW5Vc2VGcmVlRHJhdygpOiB2b2lkIHtcbiAgICB0aGlzLmNhblVzZVBvbHlEcmF3ID0gdHJ1ZTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElMYXRMbmcge1xuICBsYXQ6IG51bWJlcjtcbiAgbG5nOiBudW1iZXI7XG59XG4iXX0=