import { PolygonUtil } from './polygon.util';
export class PolygonInfo {
    constructor(polygon) {
        this.polygon = [];
        this.trashcanPoint = [];
        this.sqmArea = [];
        this.perimeter = [];
        console.log('PolygonInfo: ', polygon);
        polygon.forEach((polygons, i) => {
            this.trashcanPoint[i] = this.getTrashcanPoint(polygons[0]);
            this.sqmArea[i] = this.calculatePolygonArea(polygons[0]);
            this.perimeter[i] = this.calculatePolygonPerimeter(polygons[0]);
            console.log(polygons[0]);
            this.polygon[i] = polygons;
        });
    }
    setSqmArea(area) {
        this.sqmArea[0] = area;
    }
    getTrashcanPoint(polygon) {
        const res = Math.max.apply(Math, polygon.map(o => o.lat));
        const idx = polygon.findIndex(o => o.lat === res);
        let previousPoint;
        let nextPoint;
        if (idx > 0) {
            previousPoint = polygon[idx - 1];
            if (idx < polygon.length - 1) {
                nextPoint = polygon[idx + 1];
            }
            else {
                nextPoint = polygon[0];
            }
        }
        else {
            previousPoint = polygon[polygon.length - 1];
            nextPoint = polygon[idx + 1];
        }
        const secondPoint = previousPoint.lng < nextPoint.lng ? previousPoint : nextPoint;
        const midpoint = PolygonUtil.getMidPoint(polygon[idx], secondPoint);
        return midpoint;
    }
    calculatePolygonArea(polygon) {
        const area = PolygonUtil.getSqmArea(polygon);
        return area;
    }
    calculatePolygonPerimeter(polygon) {
        const perimeter = PolygonUtil.getPerimeter(polygon);
        return perimeter;
    }
}
const addClass = (selector, className) => {
    const elements = document.querySelectorAll(selector);
    for (let i = 0; i < elements.length; i++) {
        elements.item(i).classList.add(className);
    }
};
const removeClass = (selector, className) => {
    const elements = document.querySelectorAll(selector);
    for (let i = 0; i < elements.length; i++) {
        elements.item(i).classList.remove(className);
    }
};
export class PolygonDrawStates {
    constructor() {
        this.canUsePolyDraw = false;
        this.reset();
    }
    activate() {
        this.reset();
        this.isActivated = true;
    }
    reset() {
        this.isActivated = false;
        this.hasPolygons = false;
        this.canRevert = false;
        this.isAuto = false;
        this.resetDrawModes();
    }
    resetDrawModes() {
        this.isFreeDrawMode = false;
        removeClass('img.leaflet-tile', 'disable-events');
        this.isMoveMode = false;
    }
    setFreeDrawMode(isAuto = false) {
        if (isAuto) {
            this.isActivated = true;
        }
        if (this.isActivated) {
            this.resetDrawModes();
            this.isFreeDrawMode = true;
            addClass('img.leaflet-tile', 'disable-events');
            if (isAuto) {
                this.isAuto = true;
            }
        }
    }
    setMoveMode() {
        if (this.isActivated) {
            this.resetDrawModes();
            this.isMoveMode = true;
        }
    }
    forceCanUseFreeDraw() {
        this.canUsePolyDraw = true;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9seWdvbi1oZWxwZXJzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbXktbGliLyIsInNvdXJjZXMiOlsibGliL3BvbHlnb24taGVscGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFN0MsTUFBTSxPQUFPLFdBQVc7SUFLdEIsWUFBWSxPQUFPO1FBSm5CLFlBQU8sR0FBa0IsRUFBRSxDQUFDO1FBQzVCLGtCQUFhLEdBQWMsRUFBRSxDQUFDO1FBQzlCLFlBQU8sR0FBYSxFQUFFLENBQUM7UUFDdkIsY0FBUyxHQUFhLEVBQUUsQ0FBQztRQUV2QixPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN0QyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzlCLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNELElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3pELElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLHlCQUF5QixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2hFLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDekIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUM7UUFDN0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBQ0QsVUFBVSxDQUFDLElBQVk7UUFDckIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxJ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SSxDQUFDO0lBQzdCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBvbHlnb25VdGlsIH0gZnJvbSAnLi9wb2x5Z29uLnV0aWwnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvbHlnb25JbmZvIHtcclxuICBwb2x5Z29uOiBJTGF0TG5nW11bXVtdID0gW107XHJcbiAgdHJhc2hjYW5Qb2ludDogSUxhdExuZ1tdID0gW107XHJcbiAgc3FtQXJlYTogbnVtYmVyW10gPSBbXTtcclxuICBwZXJpbWV0ZXI6IG51bWJlcltdID0gW107XHJcbiAgY29uc3RydWN0b3IocG9seWdvbikge1xyXG4gICAgY29uc29sZS5sb2coJ1BvbHlnb25JbmZvOiAnLCBwb2x5Z29uKTtcclxuICAgIHBvbHlnb24uZm9yRWFjaCgocG9seWdvbnMsIGkpID0+IHtcclxuICAgICAgdGhpcy50cmFzaGNhblBvaW50W2ldID0gdGhpcy5nZXRUcmFzaGNhblBvaW50KHBvbHlnb25zWzBdKTtcclxuICAgICAgdGhpcy5zcW1BcmVhW2ldID0gdGhpcy5jYWxjdWxhdGVQb2x5Z29uQXJlYShwb2x5Z29uc1swXSk7XHJcbiAgICAgIHRoaXMucGVyaW1ldGVyW2ldID0gdGhpcy5jYWxjdWxhdGVQb2x5Z29uUGVyaW1ldGVyKHBvbHlnb25zWzBdKTtcclxuICAgICAgY29uc29sZS5sb2cocG9seWdvbnNbMF0pO1xyXG4gICAgICB0aGlzLnBvbHlnb25baV0gPSBwb2x5Z29ucztcclxuICAgIH0pO1xyXG4gIH1cclxuICBzZXRTcW1BcmVhKGFyZWE6IG51bWJlcik6IHZvaWQge1xyXG4gICAgdGhpcy5zcW1BcmVhWzBdID0gYXJlYTtcclxuICB9XHJcbiAgcHJpdmF0ZSBnZXRUcmFzaGNhblBvaW50KHBvbHlnb246IElMYXRMbmdbXSk6IElMYXRMbmcge1xyXG4gICAgY29uc3QgcmVzID0gTWF0aC5tYXguYXBwbHkoXHJcbiAgICAgIE1hdGgsXHJcbiAgICAgIHBvbHlnb24ubWFwKG8gPT4gby5sYXQpXHJcbiAgICApO1xyXG4gICAgY29uc3QgaWR4ID0gcG9seWdvbi5maW5kSW5kZXgobyA9PiBvLmxhdCA9PT0gcmVzKTtcclxuXHJcbiAgICBsZXQgcHJldmlvdXNQb2ludDogSUxhdExuZztcclxuICAgIGxldCBuZXh0UG9pbnQ6IElMYXRMbmc7XHJcblxyXG4gICAgaWYgKGlkeCA+IDApIHtcclxuICAgICAgcHJldmlvdXNQb2ludCA9IHBvbHlnb25baWR4IC0gMV07XHJcbiAgICAgIGlmIChpZHggPCBwb2x5Z29uLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICBuZXh0UG9pbnQgPSBwb2x5Z29uW2lkeCArIDFdO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5leHRQb2ludCA9IHBvbHlnb25bMF07XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHByZXZpb3VzUG9pbnQgPSBwb2x5Z29uW3BvbHlnb24ubGVuZ3RoIC0gMV07XHJcbiAgICAgIG5leHRQb2ludCA9IHBvbHlnb25baWR4ICsgMV07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2Vjb25kUG9pbnQgPVxyXG4gICAgICBwcmV2aW91c1BvaW50LmxuZyA8IG5leHRQb2ludC5sbmcgPyBwcmV2aW91c1BvaW50IDogbmV4dFBvaW50O1xyXG5cclxuICAgIGNvbnN0IG1pZHBvaW50ID0gUG9seWdvblV0aWwuZ2V0TWlkUG9pbnQocG9seWdvbltpZHhdLCBzZWNvbmRQb2ludCk7XHJcblxyXG4gICAgcmV0dXJuIG1pZHBvaW50O1xyXG4gIH1cclxuICBwcml2YXRlIGNhbGN1bGF0ZVBvbHlnb25BcmVhKHBvbHlnb246IElMYXRMbmdbXSk6IG51bWJlciB7XHJcbiAgICBjb25zdCBhcmVhID0gUG9seWdvblV0aWwuZ2V0U3FtQXJlYShwb2x5Z29uIGFzIGFueSk7XHJcbiAgICByZXR1cm4gYXJlYTtcclxuICB9XHJcbiAgcHJpdmF0ZSBjYWxjdWxhdGVQb2x5Z29uUGVyaW1ldGVyKHBvbHlnb246IElMYXRMbmdbXSk6IG51bWJlciB7XHJcbiAgICBjb25zdCBwZXJpbWV0ZXIgPSBQb2x5Z29uVXRpbC5nZXRQZXJpbWV0ZXIocG9seWdvbiBhcyBhbnkpO1xyXG4gICAgcmV0dXJuIHBlcmltZXRlcjtcclxuICB9XHJcbn1cclxuY29uc3QgYWRkQ2xhc3M6IChzZWxlY3Rvcjogc3RyaW5nLCBjbGFzc05hbWU6IHN0cmluZykgPT4gdm9pZCA9IChcclxuICBzZWxlY3Rvcjogc3RyaW5nLFxyXG4gIGNsYXNzTmFtZTogc3RyaW5nXHJcbik6IHZvaWQgPT4ge1xyXG4gIGNvbnN0IGVsZW1lbnRzOiBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgIGVsZW1lbnRzLml0ZW0oaSkuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHJlbW92ZUNsYXNzOiAoc2VsZWN0b3I6IHN0cmluZywgY2xhc3NOYW1lOiBzdHJpbmcpID0+IHZvaWQgPSAoXHJcbiAgc2VsZWN0b3I6IHN0cmluZyxcclxuICBjbGFzc05hbWU6IHN0cmluZ1xyXG4pOiB2b2lkID0+IHtcclxuICBjb25zdCBlbGVtZW50czogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBlbGVtZW50cy5pdGVtKGkpLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgUG9seWdvbkRyYXdTdGF0ZXMge1xyXG4gIGlzQWN0aXZhdGVkOiBib29sZWFuO1xyXG4gIGlzRnJlZURyYXdNb2RlOiBib29sZWFuO1xyXG4gIGlzTW92ZU1vZGU6IGJvb2xlYW47XHJcbiAgY2FuUmV2ZXJ0OiBib29sZWFuO1xyXG4gIGlzQXV0bzogYm9vbGVhbjtcclxuICBoYXNQb2x5Z29uczogYm9vbGVhbjtcclxuICBjYW5Vc2VQb2x5RHJhdzogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmNhblVzZVBvbHlEcmF3ID0gZmFsc2U7XHJcbiAgICB0aGlzLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBhY3RpdmF0ZSgpOiB2b2lkIHtcclxuICAgIHRoaXMucmVzZXQoKTtcclxuICAgIHRoaXMuaXNBY3RpdmF0ZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcmVzZXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmlzQWN0aXZhdGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLmhhc1BvbHlnb25zID0gZmFsc2U7XHJcbiAgICB0aGlzLmNhblJldmVydCA9IGZhbHNlO1xyXG4gICAgdGhpcy5pc0F1dG8gPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLnJlc2V0RHJhd01vZGVzKCk7XHJcbiAgfVxyXG5cclxuICByZXNldERyYXdNb2RlcygpOiB2b2lkIHtcclxuICAgIHRoaXMuaXNGcmVlRHJhd01vZGUgPSBmYWxzZTtcclxuICAgIHJlbW92ZUNsYXNzKCdpbWcubGVhZmxldC10aWxlJywgJ2Rpc2FibGUtZXZlbnRzJyk7XHJcbiAgICB0aGlzLmlzTW92ZU1vZGUgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIHNldEZyZWVEcmF3TW9kZShpc0F1dG86IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xyXG4gICAgaWYgKGlzQXV0bykge1xyXG4gICAgICB0aGlzLmlzQWN0aXZhdGVkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmlzQWN0aXZhdGVkKSB7XHJcbiAgICAgIHRoaXMucmVzZXREcmF3TW9kZXMoKTtcclxuICAgICAgdGhpcy5pc0ZyZWVEcmF3TW9kZSA9IHRydWU7XHJcbiAgICAgIGFkZENsYXNzKCdpbWcubGVhZmxldC10aWxlJywgJ2Rpc2FibGUtZXZlbnRzJyk7XHJcbiAgICAgIGlmIChpc0F1dG8pIHtcclxuICAgICAgICB0aGlzLmlzQXV0byA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE1vdmVNb2RlKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuaXNBY3RpdmF0ZWQpIHtcclxuICAgICAgdGhpcy5yZXNldERyYXdNb2RlcygpO1xyXG4gICAgICB0aGlzLmlzTW92ZU1vZGUgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZm9yY2VDYW5Vc2VGcmVlRHJhdygpOiB2b2lkIHtcclxuICAgIHRoaXMuY2FuVXNlUG9seURyYXcgPSB0cnVlO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJTGF0TG5nIHtcclxuICBsYXQ6IG51bWJlcjtcclxuICBsbmc6IG51bWJlcjtcclxufVxyXG4iXX0=